"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[647],{3023(e,r,n){n.d(r,{R:()=>a,x:()=>l});var s=n(3696);const i={},t=s.createContext(i);function a(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:r},e.children)}},6296(e,r,n){n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"data/database-queries","title":"Database Queries","description":"Purpose","source":"@site/docs/data/database-queries.md","sourceDirName":"data","slug":"/data/database-queries","permalink":"/docs/data/database-queries","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Database Queries"},"sidebar":"tutorialSidebar","previous":{"title":"TanStack Query","permalink":"/docs/data/tanstack-query"},"next":{"title":"Zustand State Management","permalink":"/docs/state/zustand"}}');var i=n(2540),t=n(3023);const a={title:"Database Queries"},l="Server-Side Database Queries",d={},o=[{value:"Purpose",id:"purpose",level:2},{value:"Why Use Server-Side Database Queries?",id:"why-use-server-side-database-queries",level:2},{value:"Benefits",id:"benefits",level:3},{value:"When to Use",id:"when-to-use",level:2},{value:"\u2705 Use Server-Side Queries For:",id:"-use-server-side-queries-for",level:3},{value:"\u274c Don&#39;t Use Server-Side Queries For:",id:"-dont-use-server-side-queries-for",level:3},{value:"Use Cases",id:"use-cases",level:2},{value:"1. Blog with Posts and Authors",id:"1-blog-with-posts-and-authors",level:3},{value:"2. E-commerce Product Page",id:"2-e-commerce-product-page",level:3},{value:"3. Dashboard with Parallel Queries",id:"3-dashboard-with-parallel-queries",level:3},{value:"Database Options",id:"database-options",level:2},{value:"1. PostgreSQL with Vercel Postgres",id:"1-postgresql-with-vercel-postgres",level:3},{value:"2. Prisma ORM (Recommended)",id:"2-prisma-orm-recommended",level:3},{value:"3. Drizzle ORM",id:"3-drizzle-orm",level:3},{value:"4. MongoDB",id:"4-mongodb",level:3},{value:"Query Patterns",id:"query-patterns",level:2},{value:"Sequential Queries",id:"sequential-queries",level:3},{value:"Parallel Queries",id:"parallel-queries",level:3},{value:"Conditional Queries",id:"conditional-queries",level:3},{value:"Paginated Queries",id:"paginated-queries",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Connection Pooling",id:"1-connection-pooling",level:3},{value:"2. Query Optimization",id:"2-query-optimization",level:3},{value:"3. Avoid N+1 Queries",id:"3-avoid-n1-queries",level:3},{value:"4. Error Handling",id:"4-error-handling",level:3},{value:"5. Caching",id:"5-caching",level:3},{value:"Security",id:"security",level:2},{value:"1. SQL Injection Prevention",id:"1-sql-injection-prevention",level:3},{value:"2. Authentication",id:"2-authentication",level:3},{value:"3. Row-Level Security",id:"3-row-level-security",level:3},{value:"Performance Tips",id:"performance-tips",level:2},{value:"1. Use Indexes",id:"1-use-indexes",level:3},{value:"2. Batch Operations",id:"2-batch-operations",level:3},{value:"3. Projection",id:"3-projection",level:3},{value:"4. Limit Results",id:"4-limit-results",level:3},{value:"Comparison",id:"comparison",level:2},{value:"Database Setup",id:"database-setup",level:2},{value:"Prisma Setup",id:"prisma-setup",level:3},{value:"Vercel Postgres",id:"vercel-postgres",level:3},{value:"MongoDB",id:"mongodb",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"Query Logging",id:"query-logging",level:3},{value:"Performance Monitoring",id:"performance-monitoring",level:3},{value:"Learn More",id:"learn-more",level:2}];function c(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"server-side-database-queries",children:"Server-Side Database Queries"})}),"\n",(0,i.jsx)(r.h2,{id:"purpose",children:"Purpose"}),"\n",(0,i.jsx)(r.p,{children:"Server-Side Database Queries in Next.js allow you to query databases directly from Server Components, eliminating the need for API routes and reducing latency."}),"\n",(0,i.jsx)(r.h2,{id:"why-use-server-side-database-queries",children:"Why Use Server-Side Database Queries?"}),"\n",(0,i.jsx)(r.h3,{id:"benefits",children:"Benefits"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Direct Access"}),": Query databases directly in components"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Better Performance"}),": Lower latency (server-to-database)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Security"}),": Database credentials never exposed to client"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Cost-Effective"}),": Reduce API calls and infrastructure costs"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Type Safety"}),": Full TypeScript support with ORMs"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Simplified Architecture"}),": No need for separate API layer"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"SEO-Friendly"}),": Content available for search engines"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,i.jsx)(r.h3,{id:"-use-server-side-queries-for",children:"\u2705 Use Server-Side Queries For:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Initial Page Data"}),": Data needed on first render"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"SEO-Critical Content"}),": Blog posts, product pages, documentation"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Static Content"}),": Data that changes infrequently"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Admin Dashboards"}),": Internal tools with sensitive data"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Reports"}),": Data-heavy pages with analytics"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Server Components"}),": Any data fetching in Server Components"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"-dont-use-server-side-queries-for",children:"\u274c Don't Use Server-Side Queries For:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Real-time Updates"}),": Use WebSockets or polling instead"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"User Interactions"}),": Use Client Components + API/Server Actions"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Frequent Mutations"}),": Use TanStack Query for optimistic updates"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Client-Side Filtering"}),": Let client handle local filtering"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsx)(r.h3,{id:"1-blog-with-posts-and-authors",children:"1. Blog with Posts and Authors"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"// app/blog/page.tsx\r\nimport { prisma } from '@/lib/prisma'\r\n\r\nasync function getPosts() {\r\n  return await prisma.post.findMany({\r\n    include: {\r\n      author: {\r\n        select: { name: true, avatar: true }\r\n      }\r\n    },\r\n    orderBy: { createdAt: 'desc' },\r\n    take: 10\r\n  })\r\n}\r\n\r\nexport default async function BlogPage() {\r\n  const posts = await getPosts()\r\n  \r\n  return (\r\n    <div>\r\n      {posts.map(post => (\r\n        <article key={post.id}>\r\n          <h2>{post.title}</h2>\r\n          <p>By {post.author.name}</p>\r\n          <p>{post.content}</p>\r\n        </article>\r\n      ))}\r\n    </div>\r\n  )\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"2-e-commerce-product-page",children:"2. E-commerce Product Page"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"import { db } from '@/lib/db'\r\n\r\nasync function getProduct(id: string) {\r\n  return await db.query(`\r\n    SELECT p.*, c.name as category\r\n    FROM products p\r\n    JOIN categories c ON p.category_id = c.id\r\n    WHERE p.id = $1\r\n  `, [id])\r\n}\r\n\r\nexport default async function ProductPage({ params }: { params: { id: string } }) {\r\n  const product = await getProduct(params.id)\r\n  \r\n  return <ProductDetails product={product} />\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"3-dashboard-with-parallel-queries",children:"3. Dashboard with Parallel Queries"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"async function getDashboardData() {\r\n  const [users, revenue, orders, products] = await Promise.all([\r\n    getUserCount(),\r\n    getTotalRevenue(),\r\n    getOrderStats(),\r\n    getTopProducts()\r\n  ])\r\n  \r\n  return { users, revenue, orders, products }\r\n}\r\n\r\nexport default async function Dashboard() {\r\n  const data = await getDashboardData()\r\n  \r\n  return <DashboardView data={data} />\r\n}\n"})}),"\n",(0,i.jsx)(r.h2,{id:"database-options",children:"Database Options"}),"\n",(0,i.jsx)(r.h3,{id:"1-postgresql-with-vercel-postgres",children:"1. PostgreSQL with Vercel Postgres"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"import { sql } from '@vercel/postgres'\r\n\r\nexport async function getUsers() {\r\n  const { rows } = await sql`\r\n    SELECT id, name, email \r\n    FROM users \r\n    WHERE active = true\r\n    ORDER BY created_at DESC\r\n  `\r\n  return rows\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"2-prisma-orm-recommended",children:"2. Prisma ORM (Recommended)"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"import { PrismaClient } from '@prisma/client'\r\n\r\nconst prisma = new PrismaClient()\r\n\r\nexport async function getUser(id: string) {\r\n  return await prisma.user.findUnique({\r\n    where: { id },\r\n    include: {\r\n      posts: true,\r\n      profile: true\r\n    }\r\n  })\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"3-drizzle-orm",children:"3. Drizzle ORM"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"import { db } from '@/lib/drizzle'\r\nimport { users, posts } from '@/lib/schema'\r\nimport { eq } from 'drizzle-orm'\r\n\r\nexport async function getUserPosts(userId: string) {\r\n  return await db\r\n    .select()\r\n    .from(posts)\r\n    .where(eq(posts.userId, userId))\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"4-mongodb",children:"4. MongoDB"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"import { MongoClient } from 'mongodb'\r\n\r\nconst client = new MongoClient(process.env.MONGODB_URI)\r\n\r\nexport async function getDocuments() {\r\n  const db = client.db('myapp')\r\n  return await db.collection('posts').find({}).toArray()\r\n}\n"})}),"\n",(0,i.jsx)(r.h2,{id:"query-patterns",children:"Query Patterns"}),"\n",(0,i.jsx)(r.h3,{id:"sequential-queries",children:"Sequential Queries"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"// Run one after another\r\nasync function getData() {\r\n  const user = await getUser()\r\n  const posts = await getUserPosts(user.id)\r\n  return { user, posts }\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"parallel-queries",children:"Parallel Queries"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"// Run simultaneously for better performance\r\nasync function getData() {\r\n  const [users, posts, comments] = await Promise.all([\r\n    getUsers(),\r\n    getPosts(),\r\n    getComments()\r\n  ])\r\n  return { users, posts, comments }\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"conditional-queries",children:"Conditional Queries"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"async function getData(userId?: string) {\r\n  if (userId) {\r\n    return await getUserData(userId)\r\n  }\r\n  return await getPublicData()\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"paginated-queries",children:"Paginated Queries"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"async function getPosts(page: number, limit: number = 10) {\r\n  const offset = (page - 1) * limit\r\n  \r\n  return await prisma.post.findMany({\r\n    skip: offset,\r\n    take: limit,\r\n    orderBy: { createdAt: 'desc' }\r\n  })\r\n}\n"})}),"\n",(0,i.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(r.h3,{id:"1-connection-pooling",children:"1. Connection Pooling"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"// lib/db.ts\r\nimport { Pool } from 'pg'\r\n\r\n// Reuse connections\r\nconst pool = new Pool({\r\n  connectionString: process.env.DATABASE_URL,\r\n  max: 20, // Maximum connections\r\n  idleTimeoutMillis: 30000,\r\n  connectionTimeoutMillis: 2000,\r\n})\r\n\r\nexport { pool }\n"})}),"\n",(0,i.jsx)(r.h3,{id:"2-query-optimization",children:"2. Query Optimization"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"// Good: Fetch only needed fields\r\nconst users = await prisma.user.findMany({\r\n  select: {\r\n    id: true,\r\n    name: true,\r\n    email: true\r\n  }\r\n})\r\n\r\n// Bad: Fetch everything\r\nconst users = await prisma.user.findMany()\n"})}),"\n",(0,i.jsx)(r.h3,{id:"3-avoid-n1-queries",children:"3. Avoid N+1 Queries"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"// Good: Single query with join\r\nconst posts = await prisma.post.findMany({\r\n  include: { author: true }\r\n})\r\n\r\n// Bad: N+1 queries\r\nconst posts = await prisma.post.findMany()\r\nfor (const post of posts) {\r\n  post.author = await prisma.user.findUnique({ where: { id: post.authorId } })\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"4-error-handling",children:"4. Error Handling"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"async function getUser(id: string) {\r\n  try {\r\n    return await prisma.user.findUniqueOrThrow({\r\n      where: { id }\r\n    })\r\n  } catch (error) {\r\n    if (error.code === 'P2025') {\r\n      notFound() // Next.js 404 page\r\n    }\r\n    throw error\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"5-caching",children:"5. Caching"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"import { cache } from 'react'\r\n\r\n// Cache function results during request\r\nexport const getUser = cache(async (id: string) => {\r\n  return await prisma.user.findUnique({ where: { id } })\r\n})\r\n\r\n// Or use Next.js revalidation\r\nexport async function getPosts() {\r\n  const posts = await fetch('https://api.example.com/posts', {\r\n    next: { revalidate: 3600 } // Cache for 1 hour\r\n  })\r\n  return posts.json()\r\n}\n"})}),"\n",(0,i.jsx)(r.h2,{id:"security",children:"Security"}),"\n",(0,i.jsx)(r.h3,{id:"1-sql-injection-prevention",children:"1. SQL Injection Prevention"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"// Good: Parameterized queries\r\nconst { rows } = await sql`\r\n  SELECT * FROM users WHERE id = ${userId}\r\n`\r\n\r\n// Bad: String concatenation\r\nconst { rows } = await sql`\r\n  SELECT * FROM users WHERE id = '${userId}'\r\n`\n"})}),"\n",(0,i.jsx)(r.h3,{id:"2-authentication",children:"2. Authentication"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"import { auth } from '@/lib/auth'\r\n\r\nasync function getPrivateData() {\r\n  const user = await auth()\r\n  if (!user) throw new Error('Unauthorized')\r\n  \r\n  return await prisma.data.findMany({\r\n    where: { userId: user.id }\r\n  })\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"3-row-level-security",children:"3. Row-Level Security"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"async function getUserPosts(userId: string, currentUserId: string) {\r\n  return await prisma.post.findMany({\r\n    where: {\r\n      userId,\r\n      OR: [\r\n        { public: true },\r\n        { userId: currentUserId } // User can see their own private posts\r\n      ]\r\n    }\r\n  })\r\n}\n"})}),"\n",(0,i.jsx)(r.h2,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,i.jsx)(r.h3,{id:"1-use-indexes",children:"1. Use Indexes"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sql",children:"CREATE INDEX idx_posts_user_id ON posts(user_id);\r\nCREATE INDEX idx_posts_created_at ON posts(created_at DESC);\n"})}),"\n",(0,i.jsx)(r.h3,{id:"2-batch-operations",children:"2. Batch Operations"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"// Good: Single query\r\nawait prisma.user.createMany({\r\n  data: users\r\n})\r\n\r\n// Bad: Multiple queries\r\nfor (const user of users) {\r\n  await prisma.user.create({ data: user })\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"3-projection",children:"3. Projection"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"// Fetch only needed columns\r\nconst users = await prisma.user.findMany({\r\n  select: {\r\n    id: true,\r\n    name: true,\r\n    // Don't fetch unused fields\r\n  }\r\n})\n"})}),"\n",(0,i.jsx)(r.h3,{id:"4-limit-results",children:"4. Limit Results"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"// Always paginate large datasets\r\nconst posts = await prisma.post.findMany({\r\n  take: 20,\r\n  skip: page * 20\r\n})\n"})}),"\n",(0,i.jsx)(r.h2,{id:"comparison",children:"Comparison"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Approach"}),(0,i.jsx)(r.th,{children:"Server Queries"}),(0,i.jsx)(r.th,{children:"API Routes"}),(0,i.jsx)(r.th,{children:"TanStack Query"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Use Case"}),(0,i.jsx)(r.td,{children:"Initial data"}),(0,i.jsx)(r.td,{children:"Public APIs"}),(0,i.jsx)(r.td,{children:"Client updates"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Latency"}),(0,i.jsx)(r.td,{children:"\u2705 Lowest"}),(0,i.jsx)(r.td,{children:"\u26a0\ufe0f Medium"}),(0,i.jsx)(r.td,{children:"\u26a0\ufe0f Medium"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Security"}),(0,i.jsx)(r.td,{children:"\u2705 High"}),(0,i.jsx)(r.td,{children:"\u26a0\ufe0f Requires auth"}),(0,i.jsx)(r.td,{children:"\u26a0\ufe0f Requires auth"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Caching"}),(0,i.jsx)(r.td,{children:"\u2705 Built-in"}),(0,i.jsx)(r.td,{children:"\u274c Manual"}),(0,i.jsx)(r.td,{children:"\u2705 Built-in"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"SEO"}),(0,i.jsx)(r.td,{children:"\u2705 Excellent"}),(0,i.jsx)(r.td,{children:"\u274c Poor"}),(0,i.jsx)(r.td,{children:"\u274c Poor"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Real-time"}),(0,i.jsx)(r.td,{children:"\u274c No"}),(0,i.jsx)(r.td,{children:"\u2705 Yes"}),(0,i.jsx)(r.td,{children:"\u2705 Yes"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Boilerplate"}),(0,i.jsx)(r.td,{children:"\u2705 Minimal"}),(0,i.jsx)(r.td,{children:"\u26a0\ufe0f More code"}),(0,i.jsx)(r.td,{children:"\u26a0\ufe0f More code"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"database-setup",children:"Database Setup"}),"\n",(0,i.jsx)(r.h3,{id:"prisma-setup",children:"Prisma Setup"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Install\r\nnpm install prisma @prisma/client\r\n\r\n# Initialize\r\nnpx prisma init\r\n\r\n# Create schema (prisma/schema.prisma)\r\n# Then migrate\r\nnpx prisma migrate dev\r\n\r\n# Generate client\r\nnpx prisma generate\n"})}),"\n",(0,i.jsx)(r.h3,{id:"vercel-postgres",children:"Vercel Postgres"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'npm install @vercel/postgres\r\n\r\n# Set env var\r\n# DATABASE_URL="postgres://..."\n'})}),"\n",(0,i.jsx)(r.h3,{id:"mongodb",children:"MongoDB"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'npm install mongodb\r\n\r\n# Set env var\r\n# MONGODB_URI="mongodb+srv://..."\n'})}),"\n",(0,i.jsx)(r.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,i.jsx)(r.h3,{id:"query-logging",children:"Query Logging"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"const prisma = new PrismaClient({\r\n  log: ['query', 'error', 'warn'],\r\n})\n"})}),"\n",(0,i.jsx)(r.h3,{id:"performance-monitoring",children:"Performance Monitoring"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-tsx",children:"prisma.$on('query', (e) => {\r\n  console.log('Query: ' + e.query)\r\n  console.log('Duration: ' + e.duration + 'ms')\r\n})\n"})}),"\n",(0,i.jsx)(r.h2,{id:"learn-more",children:"Learn More"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://www.prisma.io/docs",children:"Prisma Documentation"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://vercel.com/docs/storage/vercel-postgres",children:"Vercel Postgres"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://nextjs.org/docs/app/building-your-application/data-fetching",children:"Next.js Data Fetching"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://orm.drizzle.team",children:"Drizzle ORM"})}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);